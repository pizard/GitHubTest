# Channel
## [NIO] JAVA NIO 의 ByteBuffer와 Channel 클래스 사용하기!
 
### JAVA NIO - channel은 왜 그리고 언제 쓰나?
 - 소켓 채널 통신도 디폴트는 블록모드 이지만 'java.nio'패키지에서 제공하는 non-blocking 모드로 구현이 가능함

### 채널을 사용했을 때의 장점
 - Multi Thread 접근에 대해 안전함
 - JVM의 도움을 받지 않고 C/C++과 같이 직접 메모리를 조작하는 네이티브 코드 프로그램의 접근방식을 지원하여 메모리 엑세스 속도가 빠름
 - 다른 Thread가 Channel을 종료 시키면 블록된 스레드는 예외를 발생시킨다.

### 소켓 채널과 관련하여 자바는 3종류의 패키지를 제공한다.
 - 'java.nio'패키지는 바이트 버퍼와 관련된 클래스를 지원한다. 소켓 채널 프로그램은 스트림을 사용할 수 없는 대신 바이트 버퍼를 지원한다.
 - 'java.nio.channels'패키지는 하드웨어 디바이스, 파일, 네트워크 소켓 등에 입출력 작업을 할 수 있는 클래스들을 지원한다.
 - 'java.nio.charset'패키지는 바이트와 문자의 변환을 지원하는 인코딩과 디코딩 클래스들을 제공한다.

### 소켓 통신의 문제점
 - 메서드 실행시 블록된다는 점
 - 스트림이나 스레드처럼 빈번하게 데이터를 복사하고 사용 후 바로 소멸하는 경우 많은 데이터가 가비지 컬렉션의 대상이 되며 빈번하게 이루어지고 그만큼 성능 저하가 발생한다.
 - non blocking으로 사용하는 수켓 채널은 외부 호스트와 연결하는 소켓 또는 read()메서드의 수만큼 스레드를 만들어 처리하는 것이 아니라 채널관리자(Selector)를 사용하여 실제 입출력이 일어난 구간을 알려주면 그 때 처리
 - 즉 모든 채널과 입출력에 대해 각각의 독립적 스레득 필요하지 않음

### 결론
 - 서버처럼 외부 클라이언트로부터 접속 요구가 많은 환경에서 소켓 채널통신이 소켓 프로그램보다 좋은 성능을 낼 수 있음

### 더 공부할 것
 - Buffer가 도대체 뭔지...ㅜ
 - 소켓 복습 해야할 것 같은뎅...

### 참고
 - [DEVSTORY](http://eppffy.tistory.com/10 "DEVSTORY")