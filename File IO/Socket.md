#소켓이란 무엇인가?
## 소켓
 - 네트워크 상에서 돌아가는 두 개의 프로그램(프로세스) 간 양방향 통신의 하나의 엔드 포인트, 링크 단자
 - TCP: 신뢰할 수 있는 통신
 - UDP: 몇가지 신뢰도는 포기하되 좀 더 직접적인 통신

## 엔드 포인트
 - 아이피 주소와 포트 번호의 조합
 - 모든 TCP 연결은 2개의 앤드 포인트로 유일하게 식별되어질 수 있음
 - 따라서 클라이언트와 서버 간 여러개의 연결이 맺어질 수 있음

## 소켓통신
 - 일반적으로 서버는 특정 포트가 바인딩 된 소켓을 가지고 특정 컴퓨터 위에서 돌아갑니다.
 - 해당 서버는 클라이언트의 연결 요청을 소켓을 통해 리스팅하면서 그냥 기다릴뿐이죠

 - 클라이언트는 서버가 떠 있는 머신의 호스트네임과 서버가 리스닝하고 있는 포트 번호를 알고 있습니다.
 - 따라서 클라이언트는 이 호스트 네임과 포트를 통해서 서버와 연결을 시도하게 됩니다.
 - 또한 클라이언트는 서버 상대로 자신을 식별시켜주기 위해서 연결동안 사용될 로컬 포트에 바인딩됩니다.
 - 이 포트 바인딩 작업은 보통 시스템에 의해서 이뤄집니다.

## Socket 클래스
 - 자바 플랫폼에서 java.net 패키지는 네트워크 상에서 두개의 프로그램 간 양방향 통신에서 한쪽 지점을 구현하는 Socket 클래스를 제공
 - 추가적으로 서버가 클라이언트로부터 연결을 리스팅하고 수락하는데 사용되는 소켓을 구현하는 ServerSocket 클래스도 포함됨

## Web 통신

# ----------------------------  작업 필요 S  ----------------------------

### 프로토콜 스택의 내부 구성
 - 프로토콜 스택 내부는 데이터 송수신을 담당하는 TCP, UDP와 패킷 송 수신 동작을 제어하는 IP로 나누어져 있다.
 - 브라우저/메일 등의 일반적인 애플리케이션이 데이터를 송수신을 할 경우 TCP 프로토콜을 사용하며 DNS 서버에 대한 조회 등 짧은 제어용 데이터를 송수신 할 경우에는 UDP 프로토콜을 사용한다.
 - IP내부에는 ICMP와 ARP를 포함하고 있다. ICMP는 패킷을 우납ㄴ할 때 발생하는 오류를 통지하거나 제어용 메시지를 통지할 때 사용하고, ARP는 IP 주소에 대응하는 이더넷의 MAC 주소를 조사할 때 사용한다.
 - IP 아래에는 LAN 드라이버가 존재
 - LAN드라이버는 LAN 어댑터의 하드웨어를 제어하고 LAN 어댑터가 실제 송수신 동작 즉 케이블에 신호를 송수신하는 동작을 수행한다.

### 소켓의 실체는 통신 제어용 제어정보
 - 프로토콜 스택은 내부에 메모리 영역을 갖고 있어서 그곳에 통신 동작을 제어하기 위해 제어정보를 기록한다.
 - 이 제어정보를 또는 제어 정보가 기록되어 있는 메모리 영역을 소켓이라고 할 수 있다.
 - 대표적인 제어정보로는 통신 상대의 IP 주소, 포트번호, 통신 동작의 진행상태 등을 포함한다.
 - 프로토콜 스택은 소켓 즉, 이 제어 정보를 참조하면서 동작한다. 소켓을 만든다는 동작은 제어 정보를 추가하고 상태를 기록하거나 송수신 데이터를 일시적으로 저장하는 버퍼 메모리를 준비하는 등 통신을 준비하는 작업입니다.

### 프로토콜 스택의 동작 원리
 - 애플리케이션에서 socket을 호출하여 프로토콜 스택에 소켓 만들 것을 의뢰한다. 이에 응답하는 프로토콜 스택은 한 개의 소켓을 만든다.
 - 최초로 하는 일은 소켓 한 개 분량의 메모리 영역을 확보하는 것이다. 그리고 그 메모리 영역에 제어 정보를 기록하면서 초기 상태임을 알림는 정보까지 기록한다.
 - 다 만들어지면 소켓을 나타내는 디스크립터를 애플리케이션에게 알려준다.
 - 디스크립터를 받은 애플리케이션은 이 디스크립터를 통해서 소켓과 소통한다.

### 접속이란?
 - 소켓 생성을 의뢰해서 애플리케이션의 프로토콜 스택에 소켓이 만들어졌다.
 - 소켓을 만든 직후에는 초기상태이므로 아무 것도 기록되어 있지 않다.
 - 따라서 통신 상대가 누군지도 모른다.
 - 브라우저만이 알고 있는 IP 주소나 포트 번호를 프로토콜 스택에 전달해줘야 하는 것이다.
 - 이렇게 전달해주는 동작이 접속의 일부이다.

### 서버측은 어떤가?
 - 클라이언트 측과 마찬가지로 서버 측에서도 소켓이 만들어졌지만, 만드는 동작만으로는 통신 상대를 알 수 없다.
 - 그래서 클라이언트가 서버에게 통신하려는 클라이언트가 존재한다는 것을 전달한다.
 - 그러면 서버 측 프로토콜 스택도 클라이언트의 정보를 가질 수 있게 된다.
 - 이것도 접속의 일부이다.

 - 접속 동작의 첫번째 동작은 통신 상대와 제어 정보를 주고받아 소켓에 필요한 정보를 기록해서 소켓이 데이터 송수신이 가능한 상태로 만드는 것이다.
 - 접속 동작에서 주고받는 제어 정보는 통신 규칙으로 정해져 있으므로 규칙에 따라 접속 동작을 실행하면 필요한 정보가 전달되고 

# ----------------------------  작업 필요 E  ----------------------------





## 참고
 - [Devlog](http://asfirstalways.tistory.com/317 "[2장] 1. TCP/IP - 소켓을 작성하고 서버에 접속한다.")
 	 - 작업 필요 부분